{% load static %}
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Meu Perfil - Virtual Library</title>
        <link rel="stylesheet" href="{% static 'css/home.css' %}">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

    </head>
    <body>
        <aside class="sidebar">
            <div class="logo-container">
                <i class="fas fa-book"></i>
                <div class="welcome">Bem vindo,<br><strong>{{ user.username }}!</strong></div>
            </div>

            <nav>
                <ul class="nav-menu">
                    <li><a href="{% url 'virtuallibrary:home' %}">Home</a></li>
                    <li><a href="{% url 'virtuallibrary:profile' %}" class="active">Meu Perfil</a></li>
                    <li><a href="{% url 'virtuallibrary:book_list' %}">Descubra</a></li>
                    
                    <!-- Bot√£o apenas para bibliotec√°rios -->
                    {% if user.groups.all %}
                        {% for group in user.groups.all %}
                            {% if group.name == 'Bibliotec√°rio' %}
                                <li><a href="{% url 'virtuallibrary:gerenciar_acervo' %}">Gerenciar Acervo</a></li>
                            {% endif %}
                        {% endfor %}
                    {% endif %}
                    
                    <li><a href="#club">Clube do livro</a></li>
                    <li><a href="#collections">Cole√ß√µes</a></li>
                    <li><a href="#history">Hist√≥rico</a></li>
                    <li><a href="#support">Suporte</a></li>
                    <li><a href="#settings">Configura√ß√µes</a></li>
                </ul>
            </nav>

            <a href="{% url 'virtuallibrary:logout' %}" class="logout">
                üö™ Log out
            </a>
        </aside>

        <main class="main-content">
            <!-- Se√ß√£o de Livros Recomendados -->
            <div class="content-section">
                <h2 class="section-title">Recomendados</h2>
                <div class="books-container">
                    <div class="book-card">
                        <h3>C√≥digo limpo</h3>
                    </div>
                    <div class="book-card">
                        <h3>Python Fluent</h3>
                    </div>
                    <div class="book-card">
                        <h3>Django 5 by Example</h3>
                    </div>
                    <div class="book-card">
                        <h3>JavaScript: The Good Parts</h3>
                    </div>
                </div>
            </div>
            
            <!-- Se√ß√£o de Empr√©stimos -->
            <section class="content-section fade-in">
                <h2 class="section-title">Empr√©stimos</h2>
                <div class="loans">
                    {% if emprestimos %}
                        {% for emprestimo in emprestimos %}
                            <div class="book-card" data-book-id="{{ emprestimo.book.id }}">
                                {% if emprestimo.book.cover %}
                                    <img src="{{ emprestimo.book.cover.url }}" alt="{{ emprestimo.book.title }}" class="book-cover">
                                {% else %}
                                    <div class="book-cover-placeholder">
                                        Sem capa
                                    </div>
                                {% endif %}
                                
                                <div class="book-info">
                                    <h3>
                                        <a href="{% url 'virtuallibrary:book_detail' emprestimo.book.id %}">
                                            {{ emprestimo.book.title }}
                                        </a>
                                    </h3>
                                    <p class="book-author">{{ emprestimo.book.author }}</p>
                                    <p class="loan-date">Emprestado: {{ emprestimo.data_emprestimo|date:"d/m/Y" }}</p>
                                    <p class="return-date">Devolu√ß√£o: {{ emprestimo.data_devolucao|date:"d/m/Y" }}</p>
                                    
                                    <a href="{% url 'virtuallibrary:devolver_livro' emprestimo.id %}" 
                                    class="return-btn">
                                        üì§ Devolver Livro
                                    </a>
                                </div>
                            </div>
                        {% endfor %}
                    {% else %}
                        <div class="book-card">
                            <h3>Nenhum livro emprestado</h3>
                            <p>Voc√™ ainda n√£o possui livros emprestados.</p>
                            <a href="{% url 'virtuallibrary:book_list' %}">Explorar Biblioteca</a>
                        </div>
                    {% endif %}
                </div>
            </section>

        </main>

        <aside class="right-sidebar">
            <!-- Fila de espera -->
            <div class="sidebar-section">
                <h3>Fila de espera</h3>
                <div class="item">
                    <h4>Em breve...</h4>
                    <p>Funcionalidade em desenvolvimento</p>
                </div>
            </div>

            <!-- Datas de entrega -->
            <div class="sidebar-section">
                <h3>Datas de entrega</h3>
                {% if emprestimos %}
                    {% for emprestimo in emprestimos %}
                        <div class="item">
                            <h4>{{ emprestimo.book.title }}</h4>
                            <p>{{ emprestimo.data_devolucao|date:"d/m/Y" }}</p>
                        </div>
                    {% endfor %}
                {% else %}
                    <div class="item">
                        <h4>Nenhuma entrega pendente</h4>
                        <p>Sem empr√©stimos ativos</p>
                    </div>
                {% endif %}
            </div>

            <!-- Cole√ß√µes de professores -->
            <div class="sidebar-section">
                <h3>Cole√ß√µes de professores</h3>
                <div class="professor-item">
                    <div class="professor-avatar"></div>
                    <div class="professor-name">Professor A</div>
                </div>
                <div class="professor-item">
                    <div class="professor-avatar"></div>
                    <div class="professor-name">Professor B</div>
                </div>
                <div class="professor-item">
                    <div class="professor-avatar"></div>
                    <div class="professor-name">Professor C</div>
                </div>
                <div class="professor-item">
                    <div class="professor-avatar"></div>
                    <div class="professor-name">Professor D</div>
                </div>
            </div>
        </aside>
    </body>
</html>